# Ch2

## 练习题解答

检测无符号数加法运算中是否发生了溢出，只需要检测和是否小于任意一个加数即可。

### 练习题 2.1

A. 0x39a7f8 = 0011_1001_1010_0111_1111_1000

B. 1100_1001_0111_1011 = 0xC97B

C. 0xd5e4c = 1101_0101_1110_0100_1100

D. 10_0110_1110_0111_1011_0101 = 0x26E7B5

### 练习题 2.2

要点：十六进制的末尾 0 每个代表 $2^4$，剩下的次方换算成 1 2 4 8 即可。

| n   | $2^n$ 十进制 | $2^n$ 十六进制 |
| --- | ------------ | -------------- |
| 9   | 512          | 0x200          |
| 19  | 524288       | 0x1            |
| 14  | 16384        | 0x4000         |
| 16  | 65536        | 0x10000        |
| 17  | 131072       | 0x20000        |
| 6   | 32           | 0x20           |
| 7   | 128          | 0x80           |

### 练习题 2.3

| 十进制 | 二进制    | 十六进制 |
| ------ | --------- | -------- |
| 0      | 0000_0000 | 0x00     |
| 167    | 1010_0111 | 0xa7     |
| 62     | 0011_1110 | 0x3e     |
| 188    | 1011_1100 | 0xbc     |
| 55     | 0011_0111 | 0x37     |
| 136    | 1000_1000 | 0x88     |
| 243    | 1111_0011 | 0xf3     |
| 82     | 0101_0010 | 0x52     |
| 172    | 1010_1100 | 0xac     |
| 231    | 1110_0111 | 0xe7     |

### 练习题 2.4

A. 0x5044

B. 0x4ffc

C. 507c

D. 0xae

### 练习题 2.5

A. 21 | 87

B. 21 43 | 87 65

C. 21 43 65 | 87 65 43

### 练习题 2.6

A. 0000_0000_001**1_0101_1001_0001_0100_0001**
0100_1010_01**01_01 10_01 00_01 01_00 00_01**00

B. 在上面标注

C. 整数的二进制表示中除了最高位的 1 之外，其他都能在浮点数的二进制表示中找到匹配

### 练习题 2.7

61 62 63 64 65 66 00

### 练习题 2.8

| a   | 0110 1001 |
| --- | --------- | --------- |
| b   | 0101 0101 |
| ~a  | 1001 0110 |
| ~b  | 1010 1010 |
| a&b | 0100 0001 |
| a   | b         | 0111 1101 |
| a^b | 0011 1100 |

### 练习题 2.9

A. 黑色 - 白色 / 蓝色 - 黄色 / 绿色 - 红紫色 / 蓝绿色 - 红色

B. 蓝绿色 / 绿色 / 蓝色

### 练习题 2.10

| 步骤    | \*x       | \*y       |
| ------- | --------- | --------- |
| 初始    | a         | b         |
| 第 1 步 | a         | a^b       |
| 第 2 步 | a^a^b = b | a^b       |
| 第 3 步 | b         | b^a^b = a |

### 练习题 2.11

A. k

B. 执行第一个计算时，两个指针所指向的数组元素已经被设置为了 0，后面计算当然都是 0

C. 把 first ≤ last 改为 first < last 即可，即跳过两指针相同时的运算

### 练习题 2.12

A. x & 0xff

B. x ^ ~0 ^ 0xff = x ^ ~0xff

C. x | 0xff

### 练习题 2.13

bis(x, y)

bis(bic(x, y), bic(y, x))

### 练习题 2.14

0x66 = 0110_0110 ~0x66 = 1001_1001

0x39 = 0011_1001 ~0x39 = 1100_0110

| 表达式 | 值               | 表达式           |            |      |
| ------ | ---------------- | ---------------- | ---------- | ---- |
| x & y  | 0010_0000 = 0x20 | x && y           | 0x01       |
| x I y  | 0111_1111 = 0x7f | x \|\| y         | 0x01       |
| ~x     | ~y               | 1101_1111 = 0xdf | !x \|\| !y | 0x00 |
| x & !y | 0x00             | x && ~y          | 0x01       |

### 练习题 2.15

!(x ^ y)

一个数只有跟自己进行异或运算的时候才会为 0，然后用 ! 来取反即可。

### 练习题 2.16

| x        |           | x << 3    |          | x >> 2 逻辑的 |          | x >> 2 算数的 |          |
| -------- | --------- | --------- | -------- | ------------- | -------- | ------------- | -------- |
| 十六进制 | 二进制    | 二进制    | 十六进制 | 二进制        | 十六进制 | 二进制        | 十六进制 |
| 0xc3     | 1100_0011 | 0001_1000 | 0x18     | 0011_0000     | 0x30     | 1111_0000     | 0xf0     |
| 0x75     | 0111_0101 | 1010_1000 | 0xa8     | 0001_1101     | 0x1d     | 0001_1101     | 0x1d     |
| 0x87     | 1000_0111 | 0011_1000 | 0x38     | 0010_0001     | 0x21     | 1110_0001     | 0xe1     |
| 0x66     | 0110_0110 | 0011_0000 | 0x30     | 0001_1001     | 0x19     | 0001_1001     | 0x19     |

### 练习题 2.17

| 0xe | [1110] | 14  | -2  |
| --- | ------ | --- | --- |
| 0x0 | [0000] | 0   | 0   |
| 0x5 | [0101] | 5   | 5   |
| 0x8 | [1000] | 8   | -8  |
| 0xd | [1101] | 13  | -3  |
| 0xf | [1111] | 15  | -1  |

### 练习题 2.18

对于数字不满整数倍字节的，先在高位填充一个 0 然后再计算

| 0x02e0 |     |
| ------ | --- |
| -0x58  |     |
| 0x28   |     |
| -0x30  |     |
| 0x78   |     |
| 0x88   |     |
| 0x01f8 |     |
| 0x08   |     |
| 0xc0   |     |
| -0x48  |     |

### 练习题 2.19

| -8  | 8   |
| --- | --- |
| -3  | 13  |
| -2  | 14  |
| -1  | 15  |
| 0   | 0   |
| 5   | 5   |

### 练习题 2.20

对于小于 0 的 x，加上 $2^4$，否则直接取 x。

### 练习题 2.21

注意到 -2147483647 的补码表示形式为 10000000000000000000000000000001（中间有 30 个 0）

| 无符号数 | 1   |
| -------- | --- |
| 有       | 1   |
| 无       | 0   |
| 有       | 1   |
| 无       | 1   |

### 练习题 2.22

答案直接写在题干后面了？

### 练习题 2.23

A.

| w          | fun1(w)     | fun2(w)    |
| ---------- | ----------- | ---------- |
| 0x00000076 | 0x00000076  | 0x00000076 |
| 0x87654321 | 0x00000021  | 0x00000021 |
| 0x000000c9 | 0x000000c9  | 0xffffffc9 |
| 0xedcba987 | 0x000000e87 | 0xffffff87 |

### 练习题 2.24

| 0   | 0   | 0       | 0   |
| --- | --- | ------- | --- |
| 2   | 2   | 2 0010  | 2   |
| 9   | 9   | -7 1001 | 1   |
| 11  | 11  | -5 1011 | 3   |
| 15  | 15  | -1 1111 | -1  |

### 练习题 2.25

当 length = 0 时，计算 length - 1 时，由于发生了有符号到无符号的转换，结果就变成了 0xffffffffffffffff，这样在通过循环和指针的时候就发生了数组越界的错误。

可以将循环中止条件改为 i < length。

### 练习题 2.26

A. 当 s 的长度比 t 短时会返回不争取的结果；

B. 两个无符号数做减法不可能得到一个小于 0 的数；

C. `return strlen(s) > strlen(t)`

### 练习题 2.27

```c
int uadd_ok(unsigned x, unsigned y) {
  int u = x + y;
  return u > x ? 1 : 0;
}
```

### 练习题 2.28

| 0   | 0   | 0   | 0   |
| --- | --- | --- | --- |
| 5   | 5   | 11  | B   |
| 8   | 8   | 8   | 8   |
| D   | 13  | 3   | 3   |
| F   | 15  | 1   | 1   |

### 练习题 2.29
